{%extends 'layout.html'%}

{%block content%}
      <!-- header -->
      <div class="page-header container">
            <div class="text-center h3">{{student[1]}}</div>
    </div>
    
    <div class="container">
          <h1>Absences</h1>
      <table class="table table-striped table-hover">
            <thead>
                  <th class="bg-primary">Date Absent</th>
                  <th class="bg-primary">Excuse</th>
                  <th class="bg-primary">Date Returned</th>
                  <th class="bg-primary">Remarks</th>
            </thead>
            {%for absence in absences%}
                  <tr>
                        <td>{{absence[0]}}</td>
                        <td>{{absence[1]}}</td>
                        <td>{{absence[2]}}</td>
                        <td>{{absence[3]}}</td>
                  </tr>
            {%endfor%}
      </table>

      <h1>Tardines</h1>
      <table class="table table-striped">
            <thead>
                  <th class="bg-primary">Tardines Date</th>
                  <th class="bg-primary">Tardines Code</th>
                  <th class="bg-primary">Remarks</th>
            </thead>
            {%for tardy in tardiness%}
                  <tr>
                        <td>{{tardy[0]}}</td>
                        <td>{{tardy[1]}}</td>
                        <td>{{tardy[2]}}</td>
                  </tr>
            {%endfor%}
      </table>

      <br>
      <br>
      <br>
      <br>
      <br>

 
    <div id="chartContainer"><canvas id="generalChart"></canvas></div>
<button class="btn btn-light absences">Absences</button>
<button class="btn btn-light tardiness">Tardiness</button>

    <script>

      var generalChart = document.getElementById("generalChart").getContext('2d');
      var myChart = new Chart.Bar(generalChart, {
      data: {
      labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
      datasets: [{
            label: "Total Number of Absences Per Month",
            data: [{% for count in monthlyAbsences %}
                        {{count}},
                  {% endfor %}],   
            backgroundColor : ["#1d2951","#111e6c", "#000080","#1034a6","#0f52ba","#008ecc","#0080ff","#73c2fb","3fe0d0","#7ef9ff","#89cff0","#80dfes"],                
               
            borderWidth: 1
            }]
        },
      options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
            yAxes: [{
            ticks: {
      beginAtZero:true
                  }
                  }]
            }
      }

    })


    $(".absences").click(function(){
            myChart.data.datasets = [{
            label: "Total Number of Absences Per Month",
            data: [{% for count in monthlyAbsences %}
                        {{count}},
                  {% endfor %}], 
                  backgroundColor : ["#1d2951","#111e6c", "#000080","#1034a6","#0f52ba","#008ecc","#0080ff","#73c2fb","3fe0d0","#7ef9ff","#89cff0","#80dfes"],                
                 
            borderWidth: 1
            }]
            myChart.update()

    });

    $(".tardiness").click(function(){
            myChart.data.datasets = [{
            label: "Total Number of Tardiness Per Month",
            data: [{% for count in monthlyTardiness %}
                        {{count}},
                  {% endfor %}],    
                  backgroundColor : ["#1d2951","#111e6c", "#000080","#1034a6","#0f52ba","#008ecc","#0080ff","#73c2fb","3fe0d0","#7ef9ff","#89cff0","#80dfes"],                
              
            borderWidth: 1
            }]
            myChart.update()
    })
</script>

      
    </div>



{%endblock%}
