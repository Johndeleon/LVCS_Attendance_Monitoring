{%extends 'layout.html'%}

{%block content%}
      <!-- header -->
      <div class="page-header container">
            <div class="text-center h3">{{student[1]}}</div>
    </div>
    
    <div class="container">
          <h1>Absences</h1>
      <table class="table table-striped">
            <thead>
                  <th>Date Absent</th>
                  <th>Excuse</th>
                  <th>Date Returned</th>
                  <th>Remarks</th>
            </thead>
            {%for absence in absences%}
                  <tr>
                        <td>{{absence[0]}}</td>
                        <td>{{absence[1]}}</td>
                        <td>{{absence[2]}}</td>
                        <td>{{absence[3]}}</td>
                  </tr>
            {%endfor%}
      </table>

      <h1>Tardines</h1>
      <table class="table table-striped">
            <thead>
                  <th>Tardines Date</th>
                  <th>Tardines Code</th>
                  <th>Remarks</th>
            </thead>
            {%for tardy in tardiness%}
                  <tr>
                        <td>{{tardy[0]}}</td>
                        <td>{{tardy[1]}}</td>
                        <td>{{tardy[2]}}</td>
                  </tr>
            {%endfor%}
      </table>

      <br>
      <br>
      <br>
      <br>
      <br>

 
      <div><canvas id="bar"></canvas></div>
      <button class="btn btn-light absences">Absences</button>
      <button class="btn btn-light tardiness">Tardiness</button>
      
          <script>
      
          var bar = document.getElementById("bar").getContext('2d');
          var myChart = new Chart(bar, {
              type: 'bar',
              data: {
                  labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
                  datasets: [{
                      label: "Total Number of Absences Per Month",
                      data: [{% for count in monthlyAbsences %}
                                  {{count}},
                            {% endfor %}],                  
                      borderWidth: 1
                  }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                      yAxes: [{
                      ticks: {
                beginAtZero:true
                            }
                            }]
                      }
                }
      
          });
      
          $(".absences").click(function(){
          if(myChart)
          {
              myChart.destroy()
          }
      
          var bar = document.getElementById("bar").getContext('2d');
          var myChart = new Chart(bar, {
              type: 'bar',
              data: {
                  labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
                  datasets: [{
                      label: "Total Number of Absences Per Month",
                      data: [{% for count in monthlyAbsences %}
                                  {{count}},
                            {% endfor %}],                  
                      borderWidth: 1
                  }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                      yAxes: [{
                      ticks: {
                beginAtZero:true
                            }
                            }]
                      }
                }
      
          });
          })
      
          $(".tardiness").click(function(){
          if(myChart)
          {
              myChart.destroy()
          }
      
          var bar = document.getElementById("bar").getContext('2d');
          var myChart = new Chart(bar, {
              type: 'bar',
              data: {
                  labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
                  datasets: [{
                      label: "Total Number of Tardiness Per Month",
                      data: [{% for count in monthlyTardiness %}
                                  {{count}},
                            {% endfor %}],                  
                      borderWidth: 1
                  }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                      yAxes: [{
                      ticks: {
                beginAtZero:true
                            }
                            }]
                      }
                }
      
          });
          })
      
      </script>
      
      
    </div>



{%endblock%}
