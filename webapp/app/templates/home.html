{%extends 'layout.html'%}

{%block content%}
      <!-- header -->
      <div class="page-header container">
            <div class="text-center h1">LVCS Tardiness & Absences Record</div>
    </div>
    

<!-- general reports -->
<div class="container center-block pull-right">
    <div class=""><div><h1>General Reports</h1></div>

         <div class="h4">Total number of students with absences: {{ totalAbsentees }}</div> 
         <div class="h4">Total  number of students with tardiness: {{ totalTardiness }}</div>
         <div class="h4">Student with most number of absences: {{mostAbsences}} with {{absencesCount}} absences</div>
         <div class="h4">Student with most number of tardiness: {{mostTardiness}} with {{tardinessCount}} tardiness</div>

    </div>





    <div id="chartContainer">
          <h3>All Levels</h3>
          <canvas id="generalChart" width="200" height="200"></canvas></div>
<button class="btn btn-light absences">Absences</button>
<button class="btn btn-light tardiness">Tardiness</button>



    <script>

    var generalChart = document.getElementById("generalChart").getContext('2d');
    var myChart = new Chart(generalChart, {
        type: 'bar',
        data: {
            labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
            datasets: [{
                label: "Total Number of Absences Per Month",
                data: [{% for count in monthlyAbsences %}
                            {{count}},
                      {% endfor %}],                  
                borderWidth: 1
            }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
                yAxes: [{
                ticks: {
          beginAtZero:true
                      }
                      }]
                }
          }

    });

    $(".absences").click(function(){
      var canvas = document.getElementById('generalChart')
      canvas.remove()

      var p = document.getElementById("chartContainer")
      var element = document.createElement("canvas")
      element.setAttribute('id','generalChart')
      p.appendChild(element)

    var generalChart = document.getElementById("generalChart").getContext('2d');
    var myChart = new Chart(generalChart, {
        type: 'bar',
        data: {
            labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
            datasets: [{
                label: "Total Number of Absences Per Month",
                data: [{% for count in monthlyAbsences %}
                            {{count}},
                      {% endfor %}],                  
                borderWidth: 1
            }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
                yAxes: [{
                ticks: {
          beginAtZero:true
                      }
                      }]
                }
          }

    });
    })

    $(".tardiness").click(function(){
      var canvas = document.getElementById('generalChart')
      canvas.remove()

      var p = document.getElementById("chartContainer")
      var element = document.createElement("canvas")
      element.setAttribute('id','generalChart')
      p.appendChild(element)

    var generalChart = document.getElementById("generalChart").getContext('2d');
    var myChart = new Chart(generalChart, {
        type: 'bar',
        data: {
            labels:["January", "Febuary", "March", "April", "May", "June","July","August","September","October","November","December"],
            datasets: [{
                label: "Total Number of Tardiness Per Month",
                data: [{% for count in monthlyTardiness %}
                            {{count}},
                      {% endfor %}],                  
                borderWidth: 1
            }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
                yAxes: [{
                ticks: {
          beginAtZero:true
                      }
                      }]
                }
          }

    });
    })

</script>


{%endblock%}
